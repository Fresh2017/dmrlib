#ifndef _COMMON_CONFIG_H
#define _COMMON_CONFIG_H

{% if args.with_debug %}
#define DMR_DEBUG 1
#include <assert.h>
{% else -%}
#undef DMR_DEBUG
{% endif %}

{% if args.with_dmalloc -%}
#if !defined(WITH_DMALLOC)
#define WITH_DMALLOC 1
#endif
#include <string.h>
#include <dmalloc.h>
{% else -%}
#undef WITH_DMALLOC
{% endif %}

{% if args.with_mbelib -%}
#if !defined(WITH_MBELIB)
#define WITH_MBELIB 1
#endif
{% else -%}
#undef WITH_MBELIB
{% endif %}

{% for key, value in env.items()|sort %}{% if key.startswith('HAVE_') and value == '1' -%}
#if !defined({{ key }})
#define {{ key }} 1
#endif

{% endif %}{% endfor %}
#if defined(HAVE_LIBPTHREAD)
#define DMR_HAVE_PTHREAD 1
#endif

#endif // _COMMON_CONFIG_H

